window.__require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return r(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({Bot:[function(e,t,o){"use strict";cc._RF.push(t,"1bb9aHIZdNFCoI4MNWTiOfj","Bot");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Game"),c=cc._decorator,s=c.ccclass,a=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=0,t.gamePlay=null,t.isChaseEgg=!1,t.chaseEggNode=null,t.chaseEggPos=cc.v2(0,0),t.isPickingEgg=!1,t.pickEggId=void 0,t.botID=void 0,t}return n(t,e),t.prototype.start=function(){},t.prototype.update=function(e){if(this.chaseEggNode||this.renewChaseEgg(),null!=this.chaseEggNode&&void 0!=this.chaseEggNode)if(this.chaseEggNode.isValid){var t=this.chaseEggPos,o=this.node.getPosition(),n=cc.v2();n.x=t.x-o.x>=0?1:-1,n.y=t.y-o.y>=0?1:-1,this.node.x=this.node.x+n.x*this.speed*e,this.node.y=this.node.y+n.y*this.speed*e}else this.renewChaseEgg();var r=i.default.getInstance().createCharObj("bot",this.node.x,this.node.y,this.isPickingEgg,0,this.pickEggId,this.botID);i.default.getInstance().postToServer(JSON.stringify(r))},t.prototype.pickEggUp=function(e){this.isPickingEgg=!0;for(var t=0,o=this.gamePlay.eggs;t<o.length;t++){var n=o[t];if(n.node===e.node){this.pickEggId=n.id;break}}},t.prototype.renewChaseEgg=function(){if(this.gamePlay.eggs.length>0){var e=Math.round(Math.random()*this.gamePlay.eggs.length-1);this.gamePlay.eggs[e]&&(this.chaseEggNode=this.gamePlay.eggs[e].node,this.chaseEggPos=this.chaseEggNode.getPosition())}},r([a],t.prototype,"speed",void 0),t=r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Game":"Game"}],CollisionMgr:[function(e,t,o){"use strict";cc._RF.push(t,"a06ea/cFZ9FxqB4GNuPxSzc","CollisionMgr");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onCollisionEnter=function(e,t){"egg"==e.node.group&&"char"==t.node.group&&t.node.getComponent("MCController").addEggsCanPick(e,t);"egg"==e.node.group&&"bot"==t.node.group&&t.node.getComponent("Bot").pickEggUp(e)},t.prototype.onCollisionExit=function(e,t){"egg"==e.node.group&&"char"==t.node.group&&t.node.getComponent("MCController").removeEggsCanPick(e,t)},t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){},t=r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Egg:[function(e,t,o){"use strict";cc._RF.push(t,"1d17fs3XeBOQpVmCzE3MgFz","Egg");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eggPrefab=null,t.id=0,t}return n(t,e),t.prototype.start=function(){},r([s({type:cc.Prefab})],t.prototype,"eggPrefab",void 0),t=r([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Enums:[function(e,t,o){"use strict";cc._RF.push(t,"21967652E5NP5EzGJVfLgvc","Enums"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.action_phase=0]="action_phase",e[e.result_screen=1]="result_screen"}(o.ScreenStatus||(o.ScreenStatus={})),function(e){e[e.GET=0]="GET",e[e.POST=1]="POST"}(o.SendType||(o.SendType={})),cc._RF.pop()},{}],GamePlay:[function(e,t,o){"use strict";cc._RF.push(t,"b91d6AObu9FH4j75zZrvdMe","GamePlay");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ScreenMgr"),c=e("./Enums"),s=e("./Game"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eggPrefab=null,t.mcPrefab=null,t.botPrefab=null,t.scoreTxt=null,t.timeLimit=0,t.boxEdgeSize=cc.v2(),t.timeElapsed=0,t.mcScore=0,t.botScoresArr=[],t.mainChar=null,t.bot=null,t.bots=[],t.remoteBot=null,t.remoteBots=[],t.timeToUpdate=.02,t.timeUpdateElapsed=.02,t.mcServerPos=cc.v2(0,0),t.botServerPos=[],t.prevBotPos=[],t.ratioDelayServerTime=1,t.eggs=[],t.predictDirectPos=[],t}return n(t,e),t.prototype.onLoad=function(){this.timeElapsed=this.timeLimit,this.boxEdgeSize=cc.v2(this.node.getChildByName("boxEdge").width,this.node.getChildByName("boxEdge").height),s.default.getInstance().getServerSim().initData(),this.updateTime(this.timeLimit),this.spawnMC(),this.spawnBot(),this.spawnRemoteBot(),this.updateScore()},t.prototype.start=function(){},t.prototype.update=function(e){if(this.timeElapsed>0){if(this.timeElapsed-=e,this.timeElapsed<=0){this.timeElapsed=0,i.default.getInstance().changeScreen(c.ScreenStatus.result_screen);var t=i.default.getInstance().resultScreen.getComponent("ResultScreen"),o=Math.max.apply(Math,this.botScoresArr),n=this.mcScore>=o;t.label.string=n?"YOU WIN - Score = "+this.mcScore:"BOT"+this.botScoresArr.indexOf(o)+" WIN - Score = "+o}this.updateTime(this.timeElapsed)}this.updateRemoteBot(e),this.timeUpdateElapsed<=0&&(this.timeUpdateElapsed=this.timeToUpdate),this.timeUpdateElapsed-=e},t.prototype.onDestroy=function(){},t.prototype.spawnNewEgg=function(){var e=cc.instantiate(this.eggPrefab);this.node.addChild(e),e.setPosition(this.createNewEggPos()),e.getComponent("Touch").mainChar=this.mainChar},t.prototype.createNewEggPos=function(){var e=Math.random()*this.boxEdgeSize.x-this.boxEdgeSize.x/2,t=Math.random()*this.boxEdgeSize.y-this.boxEdgeSize.y/2;return cc.v2(e,t)},t.prototype.spawnMC=function(){var e=s.default.getInstance().getServerData(),t=JSON.parse(e).charInfo.find(function(e){return"mc"==e.id});this.mainChar=cc.instantiate(this.mcPrefab),this.node.addChild(this.mainChar),this.mainChar.setPosition(cc.v2(t.x,t.y)),this.mainChar.getComponent("MCController").gamePlay=this;var o=cc.instantiate(this.scoreTxt);o.name="mc_score",o.getComponent(cc.Label).string="You: "+this.mcScore,this.node.getChildByName("scoreBar").addChild(o)},t.prototype.spawnBot=function(){for(var e=s.default.getInstance().getServerData(),t=0,o=JSON.parse(e).charInfo;t<o.length;t++){var n=o[t];if("bot"==n.id){this.bots[n.botID]=cc.instantiate(this.botPrefab),this.node.addChild(this.bots[n.botID]),this.bots[n.botID].setPosition(cc.v2(n.x,n.y)),this.bots[n.botID].getComponent("Bot").gamePlay=this,this.bots[n.botID].getComponent("Bot").botID=n.botID,this.bots[n.botID].opacity=100,this.botScoresArr[n.botID]=n.score;var r=cc.instantiate(this.scoreTxt);r.name=""+n.botID,r.getComponent(cc.Label).string="BOT"+n.botID+": "+this.botScoresArr[n.botID],this.node.getChildByName("scoreBar").addChild(r)}}},t.prototype.updateScore=function(){this.node.getChildByName("scoreBar").getChildByName("mc_score").getComponent(cc.Label).string="You: "+this.mcScore;for(var e=0,t=this.botScoresArr;e<t.length;e++){var o=t[e],n=this.botScoresArr.indexOf(o);this.node.getChildByName("scoreBar").getChildByName(""+n).getComponent(cc.Label).string="BOT"+n+": "+this.botScoresArr[n]}},t.prototype.updateTime=function(e){this.node.getChildByName("timeRemaining").getComponent(cc.Label).string=""+Math.ceil(e)},t.prototype.updateMC=function(e){},t.prototype.updateEggs=function(e){for(var t=s.default.getInstance().getServerData(),o=JSON.parse(t).eggs,n=function(e){if(!r.eggs.some(function(t){return t.id==e.id})){var t=cc.instantiate(r.eggPrefab);t.getComponent("Touch").mainChar=r.mainChar,t.getComponent("Touch").id=e.id;var o={id:0,node:t};o.id=e.id,r.node.addChild(o.node),o.node.x=e.x,o.node.y=e.y,r.eggs.push(o)}},r=this,i=0,c=o;i<c.length;i++){n(c[i])}for(var a=function(e){o.some(function(t){return t.id==e.id})||(e.node.destroy(),e.node=null)},p=0,u=this.eggs;p<u.length;p++){a(u[p])}this.eggs=this.eggs.filter(function(e){return null!=e.node})},t.prototype.serverAlreadyUpdated=function(){for(var e=0,t=JSON.parse(s.default.getInstance().getServerSim().serverData).charInfo;e<t.length;e++){var o=t[e];"mc"==o.id?this.mcScore=o.score:"bot"==o.id&&(this.prevBotPos[o.botID]=cc.v2(this.botServerPos[o.botID]),this.botServerPos[o.botID]=cc.v2(o.x,o.y),this.predictDirectPos[o.botID]=cc.v2(this.botServerPos[o.botID].x+(this.botServerPos[o.botID].x-this.prevBotPos[o.botID].x),this.botServerPos[o.botID].y+(this.botServerPos[o.botID].y-this.prevBotPos[o.botID].y)),this.botScoresArr[o.botID]=o.score)}this.updateEggs(0),this.updateScore()},t.prototype.spawnRemoteBot=function(){for(var e=0,t=JSON.parse(s.default.getInstance().getServerSim().serverData).charInfo;e<t.length;e++){var o=t[e];"bot"==o.id&&(this.remoteBots[o.botID]=cc.instantiate(this.botPrefab),this.remoteBots[o.botID].opacity=255,this.remoteBots[o.botID].group="default",this.remoteBots[o.botID].removeComponent("Bot"),this.node.addChild(this.remoteBots[o.botID]),this.remoteBots[o.botID].setPosition(cc.v2(o.x,o.y)),this.predictDirectPos[o.botID]=cc.v2(o.x,o.y))}},t.prototype.updateRemoteBot=function(e){for(var t=0,o=this.remoteBots;t<o.length;t++){var n=o[t],r=n.getPosition(),i=cc.v2();i.x=this.predictDirectPos[this.remoteBots.indexOf(n)].x-r.x>=0?1:-1,i.y=this.predictDirectPos[this.remoteBots.indexOf(n)].y-r.y>=0?1:-1;var c=100;c=this.predictDirectPos[this.remoteBots.indexOf(n)].sub(r).mag()>100?200:this.predictDirectPos[this.remoteBots.indexOf(n)].sub(r).mag()>50?150:this.predictDirectPos[this.remoteBots.indexOf(n)].sub(r).mag()>20?120:100,n.x=n.x+i.x*c*e,n.y=n.y+i.y*c*e}},t.prototype.reset=function(){this.timeElapsed=this.timeLimit,this.updateTime(this.timeLimit),s.default.getInstance().getServerSim().initData(),this.mcScore=0,this.botScoresArr=this.botScoresArr.map(function(e){return 0*e}),this.updateScore()},r([u({type:cc.Prefab})],t.prototype,"eggPrefab",void 0),r([u({type:cc.Prefab})],t.prototype,"mcPrefab",void 0),r([u({type:cc.Prefab})],t.prototype,"botPrefab",void 0),r([u({type:cc.Prefab})],t.prototype,"scoreTxt",void 0),r([u],t.prototype,"timeLimit",void 0),t=r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./Enums":"Enums","./Game":"Game","./ScreenMgr":"ScreenMgr"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"4945bea3+9MBrl+vQAhO6mP","Game");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ServerSim"),c=cc._decorator,s=c.ccclass,a=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.botCount=5,t.eggCount=10,t.gamePlay=null,t.serverSim=null,t.timeServerUpdate=0,t.timeServerElapse=0,t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){o.getInstance().gamePlay=this.node.getChildByName("action_phase").getComponent("GamePlay"),o.getInstance().serverSim=i.default.getInstance(),o.getInstance().renewTimeServerUpdate()},t.prototype.start=function(){},t.prototype.update=function(e){o.getInstance().timeServerElapse-=e,o.getInstance().timeServerElapse<=0&&(o.getInstance().getServerSim().update(o.getInstance().timeServerUpdate),o.getInstance().renewTimeServerUpdate(),o.getInstance().getGamePlay().serverAlreadyUpdated())},t.getInstance=function(){return null==o.instance_&&(o.instance_=new o),o.instance_},t.prototype.getGamePlay=function(){return o.getInstance().gamePlay},t.prototype.getServerSim=function(){return o.getInstance().serverSim},t.prototype.postToServer=function(e){o.getInstance().serverSim.requests.some(function(t){var o=JSON.parse(t),n=JSON.parse(e);return o.id===n.id&&o.x===n.x&&o.y===n.y&&o.pick===n.pick})||o.getInstance().serverSim.requests.push(e)},t.prototype.getServerData=function(){return i.default.getInstance().serverData},t.prototype.createCharObj=function(e,t,o,n,r,i,c){return{id:e,x:t,y:o,pick:n,score:r,eggId:i,botID:c}},t.prototype.renewTimeServerUpdate=function(){o.getInstance().timeServerUpdate=.4*Math.random()+.1,o.getInstance().timeServerElapse=o.getInstance().timeServerUpdate},t.prototype.getTimeServerUpdate=function(){return o.getInstance().timeServerUpdate},t.instance_=null,t=o=r([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./ServerSim":"ServerSim"}],MCController:[function(e,t,o){"use strict";cc._RF.push(t,"39075v/NX1AtpR5uvvZLeeT","MCController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Game"),c=cc._decorator,s=c.ccclass,a=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=1,t.gamePlay=null,t.eggsCanPick=[],t.egg=null,t.moveLeft=!1,t.moveRight=!1,t.moveUp=!1,t.moveDown=!1,t.isPickingEgg=!1,t.pickEggId=void 0,t}return n(t,e),t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.start=function(){},t.prototype.update=function(e){this.moveUp?this.node.y<=this.gamePlay.boxEdgeSize.y/2&&(this.node.y+=this.speed*e):this.moveDown&&this.node.y>=-this.gamePlay.boxEdgeSize.y/2&&(this.node.y-=this.speed*e),this.moveLeft?this.node.x>=-this.gamePlay.boxEdgeSize.x/2&&(this.node.x-=this.speed*e):this.moveRight&&this.node.x<=this.gamePlay.boxEdgeSize.x/2&&(this.node.x+=this.speed*e);var t=i.default.getInstance().createCharObj("mc",this.node.x,this.node.y,this.isPickingEgg,this.gamePlay.mcScore,this.pickEggId);i.default.getInstance().postToServer(JSON.stringify(t))},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.up:this.moveUp=!0,this.moveDown=!1;break;case cc.macro.KEY.down:this.moveUp=!1,this.moveDown=!0;break;case cc.macro.KEY.left:this.moveLeft=!0,this.moveRight=!1;break;case cc.macro.KEY.right:this.moveRight=!0,this.moveLeft=!1}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.up:this.moveUp=!1;break;case cc.macro.KEY.down:this.moveDown=!1;break;case cc.macro.KEY.left:this.moveLeft=!1;break;case cc.macro.KEY.right:this.moveRight=!1}},t.prototype.pickEggUp=function(e){-1!=this.eggsCanPick.indexOf(e)&&(this.isPickingEgg=!0,this.pickEggId=e,this.eggsCanPick.splice(this.eggsCanPick.indexOf(e),1))},t.prototype.addEggsCanPick=function(e,t){for(var o=function(t){if(t.node==e.node&&!n.eggsCanPick.some(function(e){return e==t.id}))return n.eggsCanPick.push(t.id),"break"},n=this,r=0,i=this.gamePlay.eggs;r<i.length;r++){if("break"===o(i[r]))break}},t.prototype.removeEggsCanPick=function(e,t){for(var o=function(t){if(t.node===e.node&&n.eggsCanPick.some(function(e){return e==t.id}))return n.eggsCanPick.splice(n.eggsCanPick.indexOf(t.id),1),"break"},n=this,r=0,i=this.gamePlay.eggs;r<i.length;r++){if("break"===o(i[r]))break}},r([a],t.prototype,"speed",void 0),t=r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Game":"Game"}],ResultScreen:[function(e,t,o){"use strict";cc._RF.push(t,"bc520c43EpNQbKw7vPIgSym","ResultScreen");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ScreenMgr"),c=e("./Enums"),s=e("./Game"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.playAgainButtonClicked=function(e,t){i.default.getInstance().changeScreen(c.ScreenStatus.action_phase),s.default.getInstance().getGamePlay().reset()},r([u(cc.Label)],t.prototype,"label",void 0),t=r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./Enums":"Enums","./Game":"Game","./ScreenMgr":"ScreenMgr"}],ScreenMgr:[function(e,t,o){"use strict";cc._RF.push(t,"3b6f7g0QO5D+4DIJ/VlwMxi","ScreenMgr");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Enums"),c=cc._decorator,s=c.ccclass,a=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionPhase=null,t.resultScreen=null,t.curScreen=null,t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){var e=o.getInstance();e.actionPhase=this.node.getChildByName("action_phase"),e.resultScreen=this.node.getChildByName("result_screen"),e.changeScreen(i.ScreenStatus.action_phase)},t.prototype.start=function(){},t.getInstance=function(){return null==o.instance_&&(o.instance_=new o),o.instance_},t.prototype.changeScreen=function(e){o.getInstance().curScreen=e,o.getInstance().actionPhase.active=o.getInstance().curScreen===i.ScreenStatus.action_phase,o.getInstance().resultScreen.active=o.getInstance().curScreen===i.ScreenStatus.result_screen},t.instance_=null,t=o=r([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./Enums":"Enums"}],ServerSim:[function(e,t,o){"use strict";cc._RF.push(t,"3c6eehxj5dAZITppnLLaGjT","ServerSim");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Game"),c=cc._decorator,s=c.ccclass,a=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mcSpeed=300,t.serverData="{}",t.requests=[],t.eggIndex=0,t}var o;return n(t,e),o=t,t.prototype.start=function(){},t.prototype.update=function(e){for(;o.getInstance().requests.length>0;){var t=o.getInstance().requests.pop(),n=JSON.parse(t);o.getInstance().updateServerData(n,e)}},t.getInstance=function(){return null==o.instance_&&(o.instance_=new o),o.instance_},t.prototype.initData=function(){var e=JSON.parse(o.getInstance().serverData);e.charInfo=[{id:"mc",x:0,y:0,pick:!1,score:0,eggId:void 0}];for(var t=0;t<i.default.getInstance().botCount;t++){var n=i.default.getInstance().getGamePlay().createNewEggPos(),r=i.default.getInstance().createCharObj("bot",n.x,n.y,!1,0,void 0,t);e.charInfo.push(r)}e.eggs=[];for(t=0;t<i.default.getInstance().eggCount;t++){var c=i.default.getInstance().getGamePlay().createNewEggPos();o.getInstance().eggIndex=t;var s={id:o.getInstance().eggIndex,x:c.x,y:c.y};e.eggs.push(s)}o.getInstance().serverData=JSON.stringify(e)},t.prototype.updateServerData=function(e,t){for(var n=JSON.parse(o.getInstance().serverData),r=n.charInfo,i=n.eggs,c=function(t){t.id==e.id&&("mc"!=t.id&&t.botID!=e.botID||(t.x=Math.round(e.x),t.y=Math.round(e.y),t.pick=e.pick,t.eggId=e.eggId,1==t.pick&&(console.log("pick"),i.some(function(e){return e.id==t.eggId})&&(t.score=t.score+1,o.getInstance().spawnNewEgg(i)),i=i.filter(function(e){return e.id!=t.eggId}),t.pick=!1)))},s=0,a=r;s<a.length;s++){c(a[s])}n.eggs=i,n.charInfo=r,o.getInstance().serverData=JSON.stringify(n)},t.prototype.spawnNewEgg=function(e){var t=i.default.getInstance().getGamePlay().createNewEggPos();o.getInstance().eggIndex=o.getInstance().eggIndex+1,e.push({id:o.getInstance().eggIndex,x:t.x,y:t.y})},t.instance_=null,t=o=r([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./Game":"Game"}],Touch:[function(e,t,o){"use strict";cc._RF.push(t,"2ce90gohTBIuL/vOKKDDAnd","Touch");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainChar=null,t.id=0,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.start=function(){},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.mainChar.getComponent("MCController").isPickingEgg=!1},t.prototype.onTouchStart=function(e){this.mainChar&&this.mainChar.getComponent("MCController").pickEggUp(this.id)},t.prototype.onTouchEnd=function(e){this.mainChar&&(this.mainChar.getComponent("MCController").isPickingEgg=!1)},t=r([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["Bot","CollisionMgr","Egg","Enums","Game","GamePlay","MCController","ResultScreen","ScreenMgr","ServerSim","Touch"]);